<Page x:Class="ZoNo.Views.Account.AccountPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:ZoNo.Views.Account"
      xmlns:controls="using:ZoNo.Controls"
      xmlns:models="using:ZoNo.Models"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Loading="Page_Loading">
  <controls:LoaderContentControl HorizontalContentAlignment="Stretch"
                                 VerticalContentAlignment="Stretch"
                                 IsLoading="{x:Bind ViewModel.IsLoading, Mode=OneWay}">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
      <StackPanel Grid.Row="0" Orientation="Horizontal">
        <StackPanel.Resources>
          <Style TargetType="TextBox" BasedOn="{StaticResource DefaultTextBoxStyle}">
            <Setter Property="Margin" Value="12,0,0,0"/>
            <Setter Property="IsReadOnly" Value="True"/>
          </Style>
        </StackPanel.Resources>
        <Border Width="60" Height="60" CornerRadius="8" VerticalAlignment="Top">
          <Image Source="{x:Bind ViewModel.ProfilePicture, Mode=OneWay}"/>
        </Border>
        <TextBox Header="First Name" Text="{x:Bind ViewModel.FirstName, Mode=OneWay}"/>
        <TextBox Header="Last Name" Text="{x:Bind ViewModel.LastName, Mode=OneWay}"/>
        <TextBox Header="E-mail" Text="{x:Bind ViewModel.Email, Mode=OneWay}"/>
        <TextBox Header="Default Currency" Text="{x:Bind ViewModel.DefaultCurrency, Mode=OneWay}"/>
      </StackPanel>
      <Grid Grid.Row="1" Margin="0,12,0,0">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="Groups"/>
        <ListView Grid.Row="1" SelectionMode="None" ItemsSource="{x:Bind ViewModel.Groups, Mode=OneWay}">
          <ListView.ItemTemplate>
            <DataTemplate x:DataType="models:Group">
              <local:GroupView Picture="{x:Bind Picture}"
                               Name="{x:Bind Name}"
                               Members="{x:Bind Members}"
                               IsTextSelectionEnabled="True"/>
            </DataTemplate>
          </ListView.ItemTemplate>
        </ListView>
      </Grid>
      <Button Grid.Row="2" Content="Logout" HorizontalAlignment="Right" Margin="0,12,0,12" Command="{x:Bind ViewModel.LogoutCommand, Mode=OneWay}"/>
    </Grid>
  </controls:LoaderContentControl>
</Page>
